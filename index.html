<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>title</title>
		<link rel="stylesheet" href="style.css">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	</head>
	<body>
		<div id="centered_helper">
			<div id="content" class="centered">
				<div id="ribbon">
					<div id="number">1.</div>
				</div>
				<div id="dictionary_entry">
					<div id="word">
						<input type="text" autofocus placeholder="Gimme your best guess">
					</div>
					<div id="definition">This is a word. It has a definition. This definition appears here. As it is sourced from urbandictionary.com it will probably contain some profanity.</div>
					<div id="example">This is an example where the word is used in a sentence / context.</div>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			//x = defaultValue(x,42), encapsulate default parameter handling
			function defaultValue(variable, defaultVal) {
				return typeof variable !== 'undefined' ? variable : defaultVal;
			}

			String.prototype.censor = function(word) {
				var replacement = [];
				word.split(' ').forEach(function(part) {
					// U+2588 is FULL BLOCK
					var censored = new Array(part.length+1).join('\u2588');
					var str = '<span class="secret">' + censored + "</span>";
					replacement.push(str);
				})
				replacement = replacement.join(' ');
				return this.replace(new RegExp(word,'gi'), replacement);
			}

			String.prototype.remove = function() {
				var result = this;
				for (var i = 0; i < arguments.length; i++) {
					result = result.replace(arguments[i],'');
				}
				return result;
			}

			var list;
			$(document).ready(function() {
				var ud_random_url = 'http://api.urbandictionary.com/v0/random';

				$.getJSON(ud_random_url, function(json){
					console.log(json);
					list = json["list"];
					list.forEach(function(entry) {
						entry.definition = entry.definition.remove(/\[/g,/\]/g).censor(entry.word);
						entry.example = entry.example.censor(entry.word);
					})
					var e = list[0];
					$('#definition').html(e.definition);
					$('#example').html(e.example);
				})
					.fail(function(data){
						console.log("ERROR", data)
					});
			});
		</script>
	</body>
</html>
